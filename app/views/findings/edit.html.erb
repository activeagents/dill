<% content_for(:title) { "Edit #{@finding.title}" } %>

<% content_for :header do %>
  <%= render "sectionables/edit_header", section: @section, report: @report %>
<% end %>

<% content_for :toolbar do %>
  <div class="page-toolbar fill-selected align-center gap-half margin-block-end-double">
    <%= editing_mode_toggle_switch(@section, checked: true) %>

    <span class="separator margin-inline-half" aria-hidden="true"></span>

    <div class="flex align-center gap-half txt-small">
      <span class="finding-severity finding-severity--<%= @finding.severity %>">
        <%= @finding.severity_emoji %> <%= @finding.severity.titleize %>
      </span>
      <span class="finding-status"><%= @finding.status_label %></span>
    </div>

    <span class="separator margin-inline-half" aria-hidden="true"></span>

    <%= render "sections/history", section: @section %>

    <button type="submit" form="sectionable-editor" class="btn flex page-toolbar__save flex-item-justify-end flex-item-no-shrink txt-small">
      <%= image_tag "check.svg", aria: { hidden: true }, size: 24 %>
      <span class="for-screen-reader">Save</span>
    </button>
  </div>
<% end %>

<% content_for :sidebar do %>
  <%= render "sections/sidebar", report: @report %>
<% end %>

<article class="layout--reading">
  <%= render "sections/being_edited_indicator", section: @section %>

  <%= render "findings/form", report: @report, finding: @finding %>
</article>

<%= render "sections/edit_footer", section: @section %>
